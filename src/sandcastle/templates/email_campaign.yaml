# name: Email Campaign Generator
# description: Generate email campaign with subject line variants and A/B copy
# tags: [Marketing, Email, Campaign]

name: email-campaign-generator
description: Generate email campaign with subject line variants and A/B copy

default_model: sonnet
default_max_turns: 5
default_timeout: 180

input_schema:
  required: ["campaign_brief"]
  properties:
    campaign_brief:
      type: string
      description: "The campaign brief describing target audience, goals, and brand guidelines"

steps:
  - id: audience-brief
    prompt: >
      Analyze the target audience and campaign goal described below. Identify
      the audience demographics, pain points, motivations, and the primary
      action you want them to take. Define the tone of voice and any brand
      guidelines to follow.
      Campaign brief: {input.campaign_brief}
    model: sonnet
    max_turns: 5

  - id: subject-lines
    depends_on: [audience-brief]
    prompt: >
      Generate 5 email subject line variants for this campaign. For each
      variant, use a different persuasion technique (curiosity, urgency,
      personalization, benefit-driven, social proof). Explain the reasoning
      behind each and predict which audience segment it would resonate with most.
      Audience brief: {steps.audience-brief.output}
    model: sonnet
    max_turns: 3

  - id: body-variant-a
    depends_on: [audience-brief]
    prompt: >
      Write email body Variant A using a benefit-focused approach. Lead with
      the key value proposition, use bullet points to highlight benefits,
      include one testimonial placeholder, and end with a clear CTA button
      text. Keep the email concise - under 200 words for the body copy.
      Audience brief: {steps.audience-brief.output}
    model: sonnet
    max_turns: 3

  - id: body-variant-b
    depends_on: [audience-brief]
    prompt: >
      Write email body Variant B using a story-focused approach. Open with
      a relatable scenario or customer story, build emotional connection,
      then transition to the product as the solution. End with a soft CTA
      that feels like a natural next step. Keep it under 250 words.
      Audience brief: {steps.audience-brief.output}
    model: sonnet
    max_turns: 3

  - id: review
    depends_on: [subject-lines, body-variant-a, body-variant-b]
    type: approval
    prompt: >
      Review the complete email campaign package before sending. Verify
      subject lines, both body variants, and overall brand alignment.
    approval_config:
      message: "Review the email campaign variants and approve for sending"
      show_data: steps.body-variant-a.output
      timeout_hours: 24
      on_timeout: abort
      allow_edit: true
