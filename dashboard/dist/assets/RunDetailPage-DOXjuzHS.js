import{c as V,r as a,j as e,b as A,f as J,a as d,p as R,o as Q,i as S,G as Y,u as U,X as Z,q as ee,L as te,l as se,h as re}from"./index-CwcY_0GV.js";import{t as _}from"./index-Bw4YkTyy.js";import{R as L}from"./RunStatusBadge-CZgT1mF0.js";import{C as ne}from"./chevron-down-D_IPnZAM.js";import{C as ae,D as oe}from"./download-Civ1IL6l.js";import{C as le}from"./check-Oue--1G2.js";import{C as q}from"./copy-DAH08RuN.js";import{F as ce}from"./file-text-DlEzInl3.js";import{R as G}from"./rotate-ccw-nPwpX8M5.js";import{A as B}from"./arrow-right-DRy2JMKD.js";import{C as de}from"./ConfirmDialog-CnKxRn7f.js";import{A as ie}from"./arrow-left-Kd_Li62L.js";import{G as ue}from"./git-compare-arrows-YwL7UdUk.js";import{T as me}from"./trash-2-203UugO-.js";import"./index-XYXLuPD8.js";const xe=[["circle",{cx:"12",cy:"18",r:"3",key:"1mpf1b"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["path",{d:"M18 9v2c0 .6-.4 1-1 1H7c-.6 0-1-.4-1-1V9",key:"1uq4wg"}],["path",{d:"M12 12v3",key:"158kv8"}]],W=V("git-fork",xe);function fe({since:s}){const[r,t]=a.useState(()=>Math.max(0,Math.floor((Date.now()-R(s).getTime())/1e3)));return a.useEffect(()=>{const l=setInterval(()=>t(Math.max(0,Math.floor((Date.now()-R(s).getTime())/1e3))),1e3);return()=>clearInterval(l)},[s]),e.jsx("span",{className:"font-mono text-xs text-muted",children:A(r)})}function pe(s){if(typeof s=="string")return s;if(s&&typeof s=="object"&&!Array.isArray(s)){const r=s,t=Object.keys(r);if(t.length===1&&typeof r[t[0]]=="string")return r[t[0]]}return null}function he({value:s}){const r=pe(s);return r?e.jsx("div",{className:"max-h-96 overflow-auto rounded-md bg-background p-3 text-sm text-foreground whitespace-pre-wrap break-words leading-relaxed",children:r}):e.jsx("pre",{className:"max-h-64 overflow-auto rounded-md bg-background p-3 font-mono text-xs text-foreground whitespace-pre-wrap break-words",children:JSON.stringify(s,null,2)})}function be({stepId:s,status:r,costUsd:t,durationSeconds:l,attempt:n,error:i,output:u,parallelIndex:w,startedAt:m,pdfArtifact:y,runId:p,onReplay:x,onFork:b}){const[h,f]=a.useState(!1),[g,j]=a.useState(!1),N=r==="completed"||r==="failed",v=a.useCallback(async()=>{if(u==null)return;const o=typeof u=="string"?u:JSON.stringify(u,null,2);await navigator.clipboard.writeText(o),j(!0),setTimeout(()=>j(!1),2e3)},[u]);return e.jsxs("div",{className:"rounded-lg border border-border bg-surface shadow-sm",children:[e.jsxs("button",{onClick:()=>f(!h),className:d("flex w-full items-center gap-3 px-4 py-3 text-left","transition-colors duration-150 hover:bg-border/20"),children:[h?e.jsx(ne,{className:"h-4 w-4 shrink-0 text-muted"}):e.jsx(ae,{className:"h-4 w-4 shrink-0 text-muted"}),e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:s}),w!==null&&e.jsxs("span",{className:"text-xs text-muted",children:["[",w,"]"]})]}),e.jsxs("div",{className:"mt-0.5 flex items-center gap-3 text-xs text-muted",children:[e.jsx("span",{children:A(l)}),e.jsx("span",{children:J(t)}),n>1&&e.jsxs("span",{children:["attempt ",n]})]})]}),e.jsx(L,{status:r})]}),h&&e.jsxs("div",{className:"border-t border-border px-4 py-3",children:[r==="running"&&!u&&!i&&e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-2 w-2 animate-pulse rounded-full bg-accent"}),e.jsx("p",{className:"text-xs text-muted",children:"Running in Sandstorm sandbox..."})]}),m&&e.jsx(fe,{since:m})]}),i&&e.jsxs("div",{className:"mb-3 rounded-md bg-error/10 px-3 py-2",children:[e.jsx("p",{className:"text-xs font-medium text-error",children:"Error"}),e.jsx("p",{className:"mt-0.5 font-mono text-xs text-error/80",children:i})]}),u!=null&&e.jsxs("div",{children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between",children:[e.jsx("p",{className:"text-xs font-medium text-muted",children:"Output"}),e.jsx("button",{onClick:o=>{o.stopPropagation(),v()},className:d("flex items-center gap-1 rounded-md px-2 py-0.5 text-[11px] font-medium","border border-border text-muted","hover:bg-border/40 hover:text-foreground transition-colors"),children:g?e.jsxs(e.Fragment,{children:[e.jsx(le,{className:"h-3 w-3 text-success"}),"Copied"]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{className:"h-3 w-3"}),"Copy"]})})]}),e.jsx(he,{value:u})]}),y&&p&&e.jsx("div",{className:"mt-2",children:e.jsxs("a",{href:`/api/runs/${p}/steps/${s}/pdf`,target:"_blank",rel:"noopener noreferrer",className:d("inline-flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-xs font-medium","border border-accent/30 text-accent","hover:bg-accent/10 transition-colors"),children:[e.jsx(ce,{className:"h-3 w-3"}),"Download PDF Report"]})}),N&&(x||b)&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 border-t border-border pt-3",children:[x&&e.jsxs("button",{onClick:o=>{o.stopPropagation(),x(s)},className:d("flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-xs font-medium","border border-border text-muted","hover:bg-border/40 hover:text-foreground transition-colors"),children:[e.jsx(G,{className:"h-3 w-3"}),"Replay from here"]}),b&&e.jsxs("button",{onClick:o=>{o.stopPropagation(),b(s)},className:d("flex items-center gap-1.5 rounded-md px-2.5 py-1.5 text-xs font-medium","border border-accent/30 text-accent","hover:bg-accent/10 transition-colors"),children:[e.jsx(W,{className:"h-3 w-3"}),"Fork from here"]})]})]})]})}function ge({steps:s,runId:r,onReplay:t,onFork:l}){return s.length===0?e.jsx("p",{className:"py-4 text-sm text-muted",children:"No steps recorded"}):e.jsx("div",{className:"space-y-0",children:s.map((n,i)=>e.jsxs("div",{className:"relative flex gap-4",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:d("mt-4 h-3 w-3 rounded-full border-2 border-surface",Q[n.status]||"bg-muted")}),i<s.length-1&&e.jsx("div",{className:"w-px flex-1 bg-border"})]}),e.jsx("div",{className:"flex-1 pb-4",children:e.jsx(be,{stepId:n.step_id,status:n.status,costUsd:n.cost_usd,durationSeconds:n.duration_seconds,attempt:n.attempt,error:n.error,output:n.output,parallelIndex:n.parallel_index,startedAt:n.started_at,pdfArtifact:n.pdf_artifact,runId:r,onReplay:t,onFork:l})})]},`${n.step_id}-${n.parallel_index??0}-${i}`))})}function je(s){const[r,t]=a.useState([]),[l,n]=a.useState(!1),i=a.useRef(null),u=a.useCallback(()=>{i.current&&(i.current.abort(),i.current=null,n(!1))},[]);a.useEffect(()=>{if(!s)return;const m=new AbortController;i.current=m;const{url:y,headers:p}=S.sseConnect(s);return(async()=>{try{const x=await fetch(y,{headers:p,signal:m.signal});if(!x.ok||!x.body){n(!1);return}n(!0);const b=x.body.getReader(),h=new TextDecoder;let f="";for(;;){const{done:g,value:j}=await b.read();if(g)break;f+=h.decode(j,{stream:!0});const N=f.split(`
`);f=N.pop()||"";let v="message";for(const o of N)if(o.startsWith("event: "))v=o.slice(7).trim();else if(o.startsWith("data: ")){const k=o.slice(6);try{const $=JSON.parse(k),E=v;t(M=>[...M,{event:E,data:$,timestamp:new Date}])}catch{}v="message"}}}catch(x){if(x instanceof DOMException&&x.name==="AbortError")return;n(!1)}})(),()=>{m.abort(),i.current=null,n(!1)}},[s]);const w=a.useCallback(()=>t([]),[]);return{events:r,connected:l,disconnect:u,clear:w}}function Ne({runId:s}){const{events:r,connected:t}=je(`/runs/${s}/stream`),l=a.useRef(null);return a.useEffect(()=>{l.current&&(l.current.scrollTop=l.current.scrollHeight)},[r]),e.jsxs("div",{className:"rounded-xl border border-border bg-[#1a1a1a] shadow-sm overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-2 border-b border-white/10 px-4 py-2",children:[e.jsx("div",{className:d("h-2 w-2 rounded-full",t?"bg-success animate-pulse":"bg-error")}),e.jsx("span",{className:"text-xs text-white/60",children:t?"streaming...":"disconnected"})]}),e.jsx("div",{ref:l,className:"max-h-96 overflow-y-auto p-4 font-mono text-xs leading-relaxed",children:r.length===0?e.jsx("p",{className:"text-white/40",children:"Waiting for events..."}):r.map((n,i)=>e.jsxs("div",{className:"mb-1",children:[e.jsxs("span",{className:"text-accent",children:["[",n.event,"]"]})," ",e.jsx("span",{className:"text-white/80",children:JSON.stringify(n.data)})]},i))})]})}function F({run:s,isCurrent:r}){const t=U();return e.jsxs("button",{onClick:()=>!r&&t(`/runs/${s.run_id}`),className:d("flex items-center gap-3 rounded-lg border px-3 py-2 text-left text-sm transition-all duration-200",r?"border-accent bg-accent/10 cursor-default":"border-border bg-surface hover:bg-border/20 hover:shadow-sm cursor-pointer"),children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("p",{className:d("truncate font-medium",r?"text-accent":"text-foreground"),children:s.workflow_name}),e.jsxs("p",{className:"truncate font-mono text-xs text-muted",children:[s.run_id.slice(0,8),"...",s.replay_from_step&&e.jsxs("span",{className:"ml-1 text-accent",children:["from ",s.replay_from_step]})]})]}),e.jsx(L,{status:s.status})]})}function ve({parentRun:s,currentRun:r,childRuns:t}){return s||t&&t.length>0?e.jsxs("div",{className:"rounded-xl border border-border bg-surface p-4 shadow-sm",children:[e.jsxs("div",{className:"mb-3 flex items-center gap-2 text-xs font-medium text-muted",children:[e.jsx(Y,{className:"h-3.5 w-3.5"}),"Run Lineage"]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s&&e.jsxs(e.Fragment,{children:[e.jsx(F,{run:s}),e.jsx(B,{className:"h-4 w-4 shrink-0 text-muted"})]}),e.jsx(F,{run:r,isCurrent:!0}),t&&t.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"h-4 w-4 shrink-0 text-muted"}),e.jsx("div",{className:"flex flex-col gap-1",children:t.map(n=>e.jsx(F,{run:n},n.run_id))})]})]})]}):null}function we({open:s,onClose:r,runId:t,stepId:l,mode:n,onSubmit:i}){const[u,w]=a.useState(""),[m,y]=a.useState(""),[p,x]=a.useState(""),[b,h]=a.useState(!1);if(!s)return null;const f=n==="replay",g=f?"Replay from Step":"Fork from Step",j=f?G:W,N=f?"Replay":"Fork";async function v(){h(!0);try{const o={};u&&(o.prompt=u),m&&(o.model=m),p&&(o.max_turns=Number(p)),await i({from_step:l,changes:f?void 0:Object.keys(o).length>0?o:void 0})}finally{h(!1)}}return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"w-full max-w-lg rounded-xl border border-border bg-surface p-6 shadow-lg",children:[e.jsxs("div",{className:"mb-5 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{className:"h-5 w-5 text-accent"}),e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:g})]}),e.jsx("button",{onClick:r,className:"rounded-md p-1 text-muted hover:bg-border/40 hover:text-foreground transition-colors",children:e.jsx(Z,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4 rounded-lg bg-background px-3 py-2 text-sm",children:[e.jsx("p",{className:"text-muted",children:f?`Re-run from step "${l}" using the saved checkpoint. All subsequent steps will be re-executed.`:`Fork from step "${l}" with modified parameters. Previous steps use cached outputs.`}),e.jsxs("p",{className:"mt-1 font-mono text-xs text-muted",children:["Run: ",t.slice(0,8),"..."]})]}),!f&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Override Prompt (optional)"}),e.jsx("textarea",{value:u,onChange:o=>w(o.target.value),placeholder:"Leave empty to keep original prompt...",rows:3,className:d("w-full rounded-lg border border-border bg-background px-3 py-2","text-sm text-foreground placeholder:text-muted/50","focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent","transition-colors duration-200")})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Model (optional)"}),e.jsxs("select",{value:m,onChange:o=>y(o.target.value),className:d("w-full rounded-lg border border-border bg-background px-3 py-2","text-sm text-foreground","focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent","transition-colors duration-200"),children:[e.jsx("option",{value:"",children:"Keep original"}),e.jsx("option",{value:"opus",children:"Opus"}),e.jsx("option",{value:"sonnet",children:"Sonnet"}),e.jsx("option",{value:"haiku",children:"Haiku"})]})]}),e.jsxs("div",{className:"w-28",children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Max Turns"}),e.jsx("input",{type:"number",value:p,onChange:o=>x(o.target.value),placeholder:"10",min:1,max:100,className:d("w-full rounded-lg border border-border bg-background px-3 py-2","text-sm text-foreground placeholder:text-muted/50","focus:border-accent focus:outline-none focus:ring-1 focus:ring-accent","transition-colors duration-200")})]})]})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{onClick:r,className:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-muted hover:bg-border/40 hover:text-foreground transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:v,disabled:b,className:d("flex items-center gap-2 rounded-lg bg-accent px-4 py-2 text-sm font-medium text-accent-foreground","hover:bg-accent-hover transition-all duration-200","shadow-sm hover:shadow-md","disabled:opacity-50 disabled:cursor-not-allowed"),children:[e.jsx(j,{className:"h-4 w-4"}),b?"Processing...":N]})]})]})})}function ye({spent:s,limit:r}){if(r<=0)return null;const t=Math.min(s/r*100,100),l=t>=80,n=t>=100;return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{className:"mb-1 flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted",children:"Budget"}),e.jsxs("span",{className:d("font-mono font-medium",n?"text-error":l?"text-warning":"text-muted"),children:["$",s.toFixed(2)," / $",r.toFixed(2)]})]}),e.jsx("div",{className:"h-2 w-full overflow-hidden rounded-full bg-border/50",children:e.jsx("div",{className:d("h-full rounded-full transition-all duration-500",n?"bg-error":l?"bg-warning":"bg-accent"),style:{width:`${t}%`}})}),l&&!n&&e.jsxs("p",{className:"mt-1 text-xs text-warning",children:["Approaching budget limit (",Math.round(t),"%)"]}),n&&e.jsx("p",{className:"mt-1 text-xs text-error",children:"Budget exceeded"})]})}function Ie(){const{id:s}=ee(),r=U(),[t,l]=a.useState(null),[n,i]=a.useState(!0),[u,w]=a.useState(!1),[m,y]=a.useState(!1),[p,x]=a.useState(!1),[b,h]=a.useState(!1),[f,g]=a.useState(!1),[j,N]=a.useState("replay"),[v,o]=a.useState(""),k=a.useCallback(async()=>{if(s)try{const c=await S.get(`/runs/${s}`);c.data&&l(c.data)}finally{i(!1)}},[s]);a.useEffect(()=>{k()},[k]),a.useEffect(()=>{if(!t||!["running","queued"].includes(t.status))return;const c=setInterval(k,3e3);return()=>clearInterval(c)},[t,k]);const $=a.useCallback(async()=>{if(!s||m)return;y(!0);const c=await S.post(`/runs/${s}/cancel`);c.error?_.error(`Cancel failed: ${c.error.message}`):(_.success("Run cancelled"),k()),y(!1)},[s,m,k]),E=a.useCallback(async()=>{if(!s||p)return;x(!0);const c=await S.delete(`/runs/${s}`);c.error?_.error(`Delete failed: ${c.error.message}`):(_.success("Run deleted"),r("/runs")),x(!1),h(!1)},[s,p,r]),M=a.useCallback(()=>{if(!t)return;const c=new Blob([JSON.stringify(t.outputs??{},null,2)],{type:"application/json"}),T=URL.createObjectURL(c),C=document.createElement("a");C.href=T,C.download=`${t.workflow_name}-${t.run_id.slice(0,8)}.json`,C.click(),URL.revokeObjectURL(T)},[t]),z=a.useCallback(async()=>{t?.outputs&&(await navigator.clipboard.writeText(JSON.stringify(t.outputs,null,2)),_.success("Output copied to clipboard"))},[t]),H=a.useCallback(c=>{o(c),N("replay"),g(!0)},[]),X=a.useCallback(c=>{o(c),N("fork"),g(!0)},[]),K=a.useCallback(async c=>{if(!s)return;const T=c.changes?`/runs/${s}/fork`:`/runs/${s}/replay`,C=c.changes?{from_step:c.from_step,changes:c.changes}:{from_step:c.from_step},D=await S.post(T,C);if(g(!1),D.error)_.error(`Failed: ${D.error.message}`);else if(D.data){const I=D.data.new_run_id;_.success(c.changes?"Fork created":"Replay started"),I&&r(`/runs/${I}`)}},[s,r]);if(n)return e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(te,{size:"lg"})});if(!t)return e.jsx("div",{className:"py-16 text-center",children:e.jsx("p",{className:"text-muted",children:"Run not found"})});const O=["running","queued"].includes(t.status),P=t.started_at&&t.completed_at?(R(t.completed_at).getTime()-R(t.started_at).getTime())/1e3:t.started_at&&O?(Date.now()-R(t.started_at).getTime())/1e3:null;return e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("button",{onClick:()=>r("/runs"),className:"flex items-center gap-1 text-sm text-muted hover:text-foreground transition-colors",children:[e.jsx(ie,{className:"h-4 w-4"}),"Back to Runs"]}),e.jsxs("div",{className:"rounded-xl border border-border bg-surface p-3 sm:p-5 shadow-sm",children:[e.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-3 sm:gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight text-foreground",children:t.workflow_name}),e.jsx("p",{className:"mt-1 font-mono text-xs text-muted",children:t.run_id}),t.replay_from_step&&e.jsxs("p",{className:"mt-1 text-xs text-accent",children:[t.fork_changes?"Forked":"Replayed"," from step: ",t.replay_from_step]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.parent_run_id&&e.jsxs("button",{onClick:()=>r(`/runs/compare?run_a=${t.parent_run_id}&run_b=${t.run_id}`),className:d("flex items-center gap-1.5 rounded-lg border border-accent/30 px-3 py-1.5","text-sm font-medium text-accent","hover:bg-accent/10 transition-colors"),children:[e.jsx(ue,{className:"h-4 w-4"}),"Compare with Parent"]}),O&&e.jsxs("button",{onClick:$,disabled:m,className:d("flex items-center gap-1.5 rounded-lg border border-error/30 px-3 py-1.5","text-sm font-medium text-error","hover:bg-error/10 transition-colors","disabled:opacity-50 disabled:cursor-not-allowed"),children:[e.jsx(se,{className:"h-4 w-4"}),m?"Cancelling...":"Cancel"]}),!O&&e.jsxs("button",{onClick:()=>h(!0),className:d("flex items-center gap-1.5 rounded-lg border border-error/30 px-3 py-1.5","text-sm font-medium text-error","hover:bg-error/10 transition-colors"),children:[e.jsx(me,{className:"h-4 w-4"}),"Delete"]}),e.jsx(L,{status:t.status,size:"md"})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 sm:gap-6 text-sm text-muted",children:[t.started_at&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Started"}),e.jsx("p",{children:re(t.started_at)})]}),P!==null&&e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Duration"}),e.jsx("p",{children:A(P)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:"Cost"}),e.jsx("p",{children:J(t.total_cost_usd)})]})]}),t.max_cost_usd&&t.max_cost_usd>0&&e.jsx("div",{className:"mt-4",children:e.jsx(ye,{spent:t.total_cost_usd,limit:t.max_cost_usd})}),t.error&&e.jsxs("div",{className:"mt-4 rounded-md bg-error/10 px-3 py-2",children:[e.jsx("p",{className:"text-xs font-medium text-error",children:"Error"}),e.jsx("p",{className:"mt-0.5 font-mono text-xs text-error/80",children:t.error})]})]}),t.parent_run_id&&e.jsx(ve,{parentRun:{run_id:t.parent_run_id,workflow_name:t.workflow_name,status:"completed"},currentRun:{run_id:t.run_id,workflow_name:t.workflow_name,status:t.status,replay_from_step:t.replay_from_step,fork_changes:t.fork_changes}}),t.input_data&&Object.keys(t.input_data).length>0&&e.jsxs("div",{className:"rounded-xl border border-border bg-surface shadow-sm",children:[e.jsxs("button",{onClick:()=>w(!u),className:"w-full px-5 py-3 text-left text-sm font-medium text-foreground hover:bg-border/20 transition-colors",children:["Input Data ",u?"[-]":"[+]"]}),u&&e.jsx("div",{className:"border-t border-border px-5 py-3",children:e.jsx("pre",{className:"max-h-48 overflow-auto font-mono text-xs text-muted",children:JSON.stringify(t.input_data,null,2)})})]}),O&&s&&e.jsx(Ne,{runId:s}),e.jsxs("div",{children:[e.jsx("h2",{className:"mb-3 text-sm font-semibold text-foreground",children:"Steps"}),e.jsx(ge,{steps:t.steps||[],runId:t.run_id,onReplay:H,onFork:X})]}),t.outputs&&Object.keys(t.outputs).length>0&&e.jsxs("div",{className:"rounded-xl border border-border bg-surface p-3 sm:p-5 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-sm font-semibold text-foreground",children:"Output"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:z,className:d("flex items-center gap-1.5 rounded-lg border border-border px-2.5 py-1.5","text-xs font-medium text-muted","hover:bg-border/40 hover:text-foreground transition-colors"),children:[e.jsx(q,{className:"h-3.5 w-3.5"}),"Copy"]}),e.jsxs("button",{onClick:M,className:d("flex items-center gap-1.5 rounded-lg border border-border px-2.5 py-1.5","text-xs font-medium text-muted","hover:bg-border/40 hover:text-foreground transition-colors"),children:[e.jsx(oe,{className:"h-3.5 w-3.5"}),"Download JSON"]})]})]}),e.jsx("pre",{className:"mt-3 max-h-64 overflow-auto rounded-lg bg-background p-3 font-mono text-xs text-foreground whitespace-pre-wrap",children:JSON.stringify(t.outputs,null,2)})]}),e.jsx(de,{open:b,title:"Delete Run",description:`Are you sure you want to delete run ${t.run_id.slice(0,8)}...? This action cannot be undone.`,confirmLabel:p?"Deleting...":"Delete",variant:"danger",onConfirm:E,onCancel:()=>h(!1)}),e.jsx(we,{open:f,onClose:()=>g(!1),runId:t.run_id,stepId:v,mode:j,onSubmit:K})]})}export{Ie as default};
