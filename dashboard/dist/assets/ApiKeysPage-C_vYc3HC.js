import{j as e,h as b,a as m,r,X as g,T as y,i as f,L as N,K as v}from"./index-CwcY_0GV.js";import{C as w}from"./check-Oue--1G2.js";import{C as k}from"./copy-DAH08RuN.js";import{E as C}from"./EmptyState-BQhpdpld.js";import{P as K}from"./plus-BelFDhcy.js";function A({keys:n,onDeactivate:a}){return e.jsx("div",{className:"rounded-xl border border-border bg-surface shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border bg-background/50",children:[e.jsx("th",{className:"px-3 sm:px-5 py-3 text-left font-medium text-muted",children:"Key"}),e.jsx("th",{className:"px-3 sm:px-5 py-3 text-left font-medium text-muted",children:"Name"}),e.jsx("th",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-left font-medium text-muted",children:"Tenant"}),e.jsx("th",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-left font-medium text-muted",children:"Created"}),e.jsx("th",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-left font-medium text-muted",children:"Last Used"}),e.jsx("th",{className:"px-3 sm:px-5 py-3 text-right font-medium text-muted",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-border",children:n.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-3 sm:px-5 py-3",children:e.jsxs("code",{className:"rounded-md bg-background px-2 py-0.5 font-mono text-xs text-foreground",children:[t.key_prefix,"..."]})}),e.jsx("td",{className:"px-3 sm:px-5 py-3 font-medium text-foreground",children:t.name}),e.jsx("td",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-muted",children:t.tenant_id}),e.jsx("td",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-muted",children:b(t.created_at)}),e.jsx("td",{className:"hidden md:table-cell px-3 sm:px-5 py-3 text-muted",children:t.last_used_at?b(t.last_used_at):"Never"}),e.jsx("td",{className:"px-3 sm:px-5 py-3 text-right",children:e.jsx("button",{onClick:()=>a(t.id),className:m("rounded-lg border border-error/30 px-3 py-1 text-xs font-medium text-error/70","hover:bg-error/10 hover:text-error transition-colors"),children:"Deactivate"})})]},t.id))})]})})})}function S({open:n,onClose:a,onSubmit:t}){const[l,c]=r.useState(""),[o,u]=r.useState(""),[x,i]=r.useState("");if(!n)return null;function p(s){s.preventDefault();const d=x!==""?parseFloat(x):void 0;t({name:l,tenant_id:o,...d!==void 0?{max_cost_per_run_usd:d}:{}}),c(""),u(""),i("")}const h=m("h-9 w-full rounded-lg border border-border bg-background px-3 text-sm","focus:border-accent/50 focus:outline-none focus:ring-2 focus:ring-ring/30");return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onClick:a}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md rounded-xl border border-border bg-surface p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"Create API Key"}),e.jsx("button",{onClick:a,className:"rounded-lg p-1 text-muted hover:text-foreground",children:e.jsx(g,{className:"h-5 w-5"})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Key Name"}),e.jsx("input",{type:"text",value:l,onChange:s=>c(s.target.value),placeholder:"e.g. Production API",required:!0,className:h}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:"Label for identifying this key in the dashboard."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Tenant ID"}),e.jsx("input",{type:"text",value:o,onChange:s=>u(s.target.value),placeholder:"e.g. acme-corp",required:!0,className:h}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:"All runs created with this key are scoped to this tenant."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"mb-1 block text-xs font-medium text-muted",children:"Max Cost per Run (USD)"}),e.jsx("input",{type:"number",value:x,onChange:s=>i(s.target.value),placeholder:"e.g. 5.00",min:"0",step:"0.01",className:h}),e.jsx("p",{className:"text-[11px] text-muted-foreground mt-0.5",children:"Budget limit per run for this API key. Leave empty for unlimited."})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[e.jsx("button",{type:"button",onClick:a,className:"rounded-lg border border-border px-4 py-2 text-sm font-medium text-muted hover:text-foreground transition-colors",children:"Cancel"}),e.jsx("button",{type:"submit",className:m("rounded-lg bg-accent px-4 py-2 text-sm font-medium text-accent-foreground","hover:bg-accent-hover transition-all duration-200","shadow-sm hover:shadow-md"),children:"Create Key"})]})]})]})})]})}function I({apiKey:n,onClose:a}){const[t,l]=r.useState(!1);function c(){navigator.clipboard.writeText(n),l(!0),setTimeout(()=>l(!1),2e3)}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-50 bg-black/40",onClick:a}),e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-lg rounded-xl border border-border bg-surface p-6 shadow-xl",children:[e.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[e.jsx("h2",{className:"text-lg font-semibold text-foreground",children:"API Key Created"}),e.jsx("button",{onClick:a,className:"rounded-lg p-1 text-muted hover:text-foreground",children:e.jsx(g,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"mb-4 flex items-start gap-3 rounded-lg border border-warning/30 bg-warning/5 px-4 py-3",children:[e.jsx(y,{className:"mt-0.5 h-4 w-4 shrink-0 text-warning"}),e.jsx("p",{className:"text-sm text-warning",children:"Save this key now. It will not be shown again."})]}),e.jsxs("div",{className:"mb-4 flex items-center gap-2 rounded-lg border border-border bg-background px-4 py-3",children:[e.jsx("code",{className:"flex-1 break-all font-mono text-sm text-foreground",children:n}),e.jsx("button",{onClick:c,className:m("shrink-0 rounded-lg border border-border p-2 transition-colors",t?"border-success/30 bg-success/10 text-success":"text-muted hover:text-foreground hover:bg-background"),children:t?e.jsx(w,{className:"h-4 w-4"}):e.jsx(k,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:a,className:m("rounded-lg bg-accent px-4 py-2 text-sm font-medium text-accent-foreground","hover:bg-accent-hover transition-all duration-200","shadow-sm hover:shadow-md"),children:"Done"})})]})})]})}function M(){const[n,a]=r.useState([]),[t,l]=r.useState(!0),[c,o]=r.useState(!1),[u,x]=r.useState(null),i=r.useCallback(async()=>{try{const s=await f.get("/api-keys");s.data&&a(s.data)}finally{l(!1)}},[]);r.useEffect(()=>{i()},[i]);const p=r.useCallback(async s=>{const d=await f.post("/api-keys",s);o(!1),d.data&&"key"in d.data&&(x(d.data.key),i())},[i]),h=r.useCallback(async s=>{await f.delete(`/api-keys/${s}`),a(d=>d.filter(j=>j.id!==s))},[]);return t?e.jsx("div",{className:"flex h-64 items-center justify-center",children:e.jsx(N,{size:"lg"})}):e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-semibold tracking-tight text-foreground",children:"API Keys"}),e.jsxs("button",{onClick:()=>o(!0),className:m("flex items-center gap-2 rounded-lg bg-accent px-3 sm:px-4 py-2 text-sm font-medium text-accent-foreground","hover:bg-accent-hover transition-all duration-200","shadow-sm hover:shadow-md"),children:[e.jsx(K,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"New API Key"})]})]}),n.length===0?e.jsx(C,{icon:v,title:"No API keys yet",description:"Create your first API key to authenticate requests.",action:{label:"Create API Key",onClick:()=>o(!0)}}):e.jsx(A,{keys:n,onDeactivate:h}),e.jsx(S,{open:c,onClose:()=>o(!1),onSubmit:p}),u&&e.jsx(I,{apiKey:u,onClose:()=>x(null)})]})}export{M as default};
